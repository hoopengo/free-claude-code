<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://raw.githubusercontent.com/hoopengo/hoopengo/refs/heads/master/images/banner-FCC.svg">
    <source media="(prefers-color-scheme: light)" srcset="https://raw.githubusercontent.com/hoopengo/hoopengo/refs/heads/master/images/banner-FCC.svg">
    <img alt="banner" src="https://raw.githubusercontent.com/hoopengo/hoopengo/refs/heads/master/images/banner-FCC.svg" style="max-width: 100%;">
  </picture>
</p>

## Бесплатный Claude Code

> Получите $225 бесплатных кредитов на AgentRouter без банковской карты — достаточно для примерно 450 запросов к Claude Sonnet 4.5.

### Что это такое?

Это руководство поможет вам настроить [Claude Code](https://docs.claude.com/en/docs/claude-code) с промо-кредитами AgentRouter, позволяя использовать модели Claude AI от Anthropic через интерфейс командной строки без немедленной оплаты.

### Требования

- Аккаунт GitHub (возрастом не менее 2 месяцев)
- macOS, Linux или Windows с WSL
- Доступ к терминалу с bash, zsh или fish shell

### Шаги настройки

#### 1. Создайте аккаунт AgentRouter

Зарегистрируйтесь через GitHub по ссылке: https://agentrouter.org/register?aff=WrjY

**Примечание:** Использование этой реферальной ссылки дает вам **$225** вместо $200 в качестве бонуса при регистрации. Ваш аккаунт GitHub должен быть возрастом не менее 2 месяцев, чтобы пройти квалификацию.

#### 2. Сгенерируйте API токен

Перейдите в консоль AgentRouter: https://agentrouter.org/console/token

Создайте новый токен и установите квоту на **Unlimited** (Неограниченно).

#### 3. Установите Claude Code

Следуйте официальной инструкции по установке: https://docs.claude.com/en/docs/claude-code/setup

#### 4. Настройте переменные окружения

Вы можете либо запустить отдельный скрипт, либо скопировать/вставить скрипт ниже в ваш терминал. Скрипт настройки включает:

**Возможности:**

- Безопасный ввод токена (ввод будет скрыт)
- Автоматическое определение shell (bash, zsh или fish) с совместимостью macOS/Linux
- Идемпотентная конфигурация (предотвращает дубликаты, предлагает обновить существующую конфигурацию)
- Валидация токена и всесторонняя обработка ошибок
- Автоматическое резервное копирование существующей конфигурации
- Цветной вывод для лучшей читаемости
- Проверка конфигурации с подробной диагностикой
- Проверка установки Claude CLI

**Для запуска отдельного скрипта:**

```bash
curl -fsSL https://raw.githubusercontent.com/hoopengo/free-claude-code/master/setup_claude_agentrouter.sh | bash
```

#### 5. Запустите Claude Code

После успешного завершения скрипта перезапустите терминал или выполните:

```bash
# Для bash/zsh
source ~/.bashrc  # или ~/.zshrc

# Для fish
source ~/.config/fish/config.fish
```

Затем запустите Claude Code:

```bash
claude
```

Вы можете безопасно игнорировать любые предупреждения от CLI и продолжать его использование.

**Важно:** Используйте только токены, которые вы сгенерировали в своем собственном аккаунте AgentRouter. Храните токены в секрете и никогда не делитесь ими.

### Устранение неполадок

#### Скрипт сообщает о существующей конфигурации

Улучшенный скрипт определяет, запускали ли вы его ранее. Если найдено:

- Выберите "y" для обновления вашего токена
- Выберите "n" для сохранения текущей конфигурации

Ваша старая конфигурация будет безопасно удалена перед добавлением новой.

#### Токен не работает

- Проверьте, что токен был скопирован правильно (без лишних пробелов)
- Убедитесь, что переменные окружения установлены: `echo $ANTHROPIC_API_KEY`
- Перезапустите терминал после выполнения скрипта настройки
- Скрипт теперь показывает длину токена для проверки

#### Проблемы с определением shell

Скрипт автоматически определяет ваш shell. Если определение неверное:

- Проверьте вашу переменную окружения SHELL: `echo $SHELL`
- На macOS скрипт автоматически использует .bash_profile для bash вместо .bashrc
- При необходимости отредактируйте определенный RC файл вручную

#### Конфигурация не загружается

Скрипт теперь автоматически проверяет конфигурацию. Если вы видите красные ✗ метки:

- Полностью перезапустите терминал (не просто откройте новую вкладку)
- Вручную загрузите ваш RC файл: `source ~/.zshrc` (или ~/.bashrc и т.д.)
- Проверьте резервный файл, созданный скриптом, чтобы убедиться, что ничего не было повреждено

#### Аккаунт GitHub слишком новый

- AgentRouter требует, чтобы аккаунтам GitHub было не менее 2 месяцев
- Подождите, пока ваш аккаунт не будет соответствовать требованию по возрасту

#### Ошибки скрипта

- Скрипт включает комплексную проверку ошибок с цветным выводом
- Зеленые ✓ метки указывают на успех
- Желтые ⚠ метки указывают на предупреждения (обычно безопасно продолжать)
- Красные ✗ метки указывают на ошибки, требующие внимания
- Все резервные копии имеют временные метки, поэтому вы всегда можете восстановить предыдущие конфигурации

### Цены

| Модель (Релиз)                 | Model Ratio | Completion Ratio | Group Ratio | Запрос $ / 1М токенов | Завершение $ / 1М токенов |
| ------------------------------ | ----------- | ---------------- | ----------- | --------------------- | ------------------------- |
| claude-3-5-haiku (2024-10-22)  | 0.5         | 5                | 1           | $1.000                | $5.000                    |
| claude-haiku-4-5 (2025-10-01)  | 0.5         | 0.5              | 1           | $1.000                | $0.500                    |
| claude-sonnet-4 (2025-05-14)   | 1.5         | 5                | 1           | $3.000                | $15.000                   |
| claude-sonnet-4-5 (2025-09-29) | 2           | 5                | 1           | $4.000                | $20.000                   |

**Приблизительное использование:** С $225 кредита вы можете сделать примерно:

- **450 запросов** к Claude Sonnet 4.5 (исходя из среднего размера запроса)
- **1,125 запросов** к Claude Sonnet 4
- **4,500 запросов** к Claude Haiku 4.5

### Дополнительные ресурсы

- [Документация Claude Code](https://docs.claude.com/en/docs/claude-code)
- [Руководство по настройке Claude Code](https://docs.claude.com/en/docs/claude-code/setup)
- [Сайт AgentRouter](https://agentrouter.org)
- [Консоль AgentRouter](https://agentrouter.org/console)

### Часто задаваемые вопросы

**В: Это полностью бесплатно?**

О: Да, AgentRouter предоставляет $225 промо-кредитов при регистрации по реферальной ссылке. Кредитная карта не требуется.

**В: Безопасны ли мои данные?**

О: Это китайский сервис, так что..

**В: Могу ли я использовать несколько аккаунтов?**

О: Да, если у вас есть другой аккаунт GitHub.

### Вклад в проект

Нашли проблему или хотите улучшить это руководство? Вклад приветствуется!

---

**Отказ от ответственности:** Это неофициальное руководство. AgentRouter и Anthropic — это отдельные сервисы. Всегда просматривайте условия использования и политику конфиденциальности перед использованием любого сервиса.
